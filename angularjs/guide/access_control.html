

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Access Control &mdash; Stormpath AngularJS + Yeoman Guide 0.0.2 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Stormpath AngularJS + Yeoman Guide 0.0.2 documentation" href="index.html"/>
        <link rel="next" title="Waiting For User State" href="wait_for_user.html"/>
        <link rel="prev" title="Password Reset Flow" href="password_reset.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">
  
<!-- Google Tag Manager -->
<noscript><iframe src=".//www.googletagmanager.com/ns.html?id=GTM-NQZZFW"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NQZZFW');</script>
<!-- End Google Tag Manager -->

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Stormpath AngularJS + Yeoman Guide</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#what-we-re-building">What We&#8217;re Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#example-project">Example Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#how-to-get-support">How to get Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="create_new_project.html">Creating a Fullstack Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="create_new_project.html#installing-node-grunt-bower-and-yeoman">Installing Node, Grunt, Bower and Yeoman</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_new_project.html#create-an-angular-fullstack-project">Create an Angular-Fullstack Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_new_project.html#install-the-stormpath-packages">Install the Stormpath Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_new_project.html#upgrade-express">Upgrade Express</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_new_project.html#git-tracking">Git Tracking</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="create_tenant.html">Create a Stormpath Tenant</a><ul>
<li class="toctree-l2"><a class="reference internal" href="create_tenant.html#sign-up-for-stormpath">Sign up for Stormpath</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_tenant.html#create-an-api-key-pair">Create an API Key Pair</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_tenant.html#create-a-stormpath-application">Create a Stormpath Application</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="protect_api.html">Configure the Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="protect_api.html#setting-environment-variables">Setting Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="protect_api.html#require-the-stormpath-module">Require the Stormpath Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="protect_api.html#protect-your-api-routes">Protect Your API Routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="protect_api.html#reload-the-app">Reload the App</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configure_angular.html">Configure the Angular Application</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configure_angular.html#add-stormpath-to-the-angular-application">Add Stormpath to the Angular Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="configure_angular.html#configure-the-ui-router-integration">Configure the UI Router Integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="customize_menu.html">Customize the Menu</a><ul>
<li class="toctree-l2"><a class="reference internal" href="customize_menu.html#modify-navbar-html">Modify navbar.html</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="login.html">Create the Login Form</a><ul>
<li class="toctree-l2"><a class="reference internal" href="login.html#generate-the-login-route">Generate the /login Route</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#use-the-login-form-directive">Use the Login Form Directive</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="register.html">Create the Registration Form</a><ul>
<li class="toctree-l2"><a class="reference internal" href="register.html#generate-the-register-route">Generate the /register Route</a></li>
<li class="toctree-l2"><a class="reference internal" href="register.html#add-the-registration-form-directive">Add the Registration Form Directive</a></li>
<li class="toctree-l2"><a class="reference internal" href="register.html#generate-the-verify-route">Generate the /verify Route</a></li>
<li class="toctree-l2"><a class="reference internal" href="register.html#add-the-sptoken-parameter">Add the sptoken Parameter</a></li>
<li class="toctree-l2"><a class="reference internal" href="register.html#use-the-email-verification-directive">Use the Email Verification Directive</a></li>
<li class="toctree-l2"><a class="reference internal" href="register.html#configure-the-directory">Configure the Directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="register.html#try-it-register-for-an-account">Try It, Register for an Account!</a></li>
<li class="toctree-l2"><a class="reference internal" href="register.html#customizing-the-form-fields">Customizing the Form Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="register.html#customizing-the-form-template">Customizing the Form Template</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user_profile.html">Create the Profile View</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user_profile.html#generate-the-profile-route">Generate the /profile Route</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_profile.html#force-authentication">Force Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_profile.html#create-the-view">Create the View</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_profile.html#try-it-out-see-your-profile">Try It Out, See Your Profile!</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="password_reset.html">Password Reset Flow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#generate-the-routes">Generate the Routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#add-the-sptoken-parameter">Add the sptoken Parameter</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#use-the-password-reset-directives">Use the Password Reset Directives</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#configure-the-directory">Configure the Directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#try-it-reset-your-password">Try It, Reset your Password!</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Access Control</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#server-configuration">Server Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ui-state-control">UI State Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="#helper-directives">Helper Directives</a></li>
<li class="toctree-l2"><a class="reference internal" href="#api-security">API Security</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="wait_for_user.html">Waiting For User State</a><ul>
<li class="toctree-l2"><a class="reference internal" href="wait_for_user.html#use-the-waitforuser-option">Use the waitForUser Option</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Stormpath AngularJS + Yeoman Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Access Control</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/access_control.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="access-control">
<span id="id1"></span><h1>Access Control<a class="headerlink" href="#access-control" title="Permalink to this headline">¶</a></h1>
<p>Parts of your application may only be available to certain users.
Stormpath provides Groups, which is a great way to segment users.</p>
<p>We provide some functionality, which makes it easy to make UI decisions
by looking at the groups that the account is a member of.</p>
<div class="section" id="server-configuration">
<h2>Server Configuration<a class="headerlink" href="#server-configuration" title="Permalink to this headline">¶</a></h2>
<p>Our Angular SDK knows who the current user is by accessing the <code class="docutils literal"><span class="pre">/me</span></code> route on
your server.  This route needs to return the account object, with its groups
expanded.  If you are using our Express.js library you can enable this with the
<code class="docutils literal"><span class="pre">expand</span></code> option:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">ExpressStormpath</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">app</span><span class="p">,{</span>
  <span class="nx">website</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">expand</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">groups</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="nx">web</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">spaRoot</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;..&#39;</span><span class="p">,</span><span class="s1">&#39;client&#39;</span><span class="p">,</span><span class="s1">&#39;index.html&#39;</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}));</span>
</pre></div>
</div>
</div>
<div class="section" id="ui-state-control">
<h2>UI State Control<a class="headerlink" href="#ui-state-control" title="Permalink to this headline">¶</a></h2>
<p>If you wish to prevent access to an entire UI State, you can define
a group authorization check in the state configuration.  In this example,
we are requiring that the user be in the Admin group:</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="c1">// Require a user to be in the admins group in order to see this state</span>
<span class="nx">$stateProvider</span>
  <span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;/admin&#39;</span><span class="p">,</span>
    <span class="nx">controller</span><span class="o">:</span> <span class="s1">&#39;AdminCtrl&#39;</span><span class="p">,</span>
    <span class="nx">sp</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">authorize</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;admins&#39;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>
</pre></div>
</div>
<p>For more examples, see the <a class="reference external" href="https://docs.stormpath.com/angularjs/sdk/#/api/stormpath.SpStateConfig:SpStateConfig">SpStateConfig documentation</a>.</p>
</div>
<div class="section" id="helper-directives">
<h2>Helper Directives<a class="headerlink" href="#helper-directives" title="Permalink to this headline">¶</a></h2>
<p>If you need to show or hide specific elements in response to group state,
you can use the <a class="reference external" href="https://docs.stormpath.com/angularjs/sdk/#/api/stormpath.ifUserInGroup:ifUserInGroup">ifUserInGroup</a> and <a class="reference external" href="https://docs.stormpath.com/angularjs/sdk/#/api/stormpath.ifUserNotInGroup:ifUserNotInGroup">ifUserNotInGroup</a> directives. In
this example, we show a link to the Admin view if the user is in the Admin
group.  If the user is not in the Admin group, we let them know that they
need to request access:</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav navbar-nav&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">if-user-in-group</span><span class="o">=</span><span class="s">&quot;admins&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">ng-href</span><span class="o">=</span><span class="s">&quot;/admin&quot;</span><span class="p">&gt;</span>Admin Console<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">if-user</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">ui-sref</span><span class="o">=</span><span class="s">&quot;main&quot;</span> <span class="na">sp-logout</span><span class="p">&gt;</span>Logout<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Hello, {{user.fullName}}<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span> <span class="na">if-user-not-in-group</span><span class="o">=</span><span class="s">&quot;admins&quot;</span><span class="p">&gt;</span>
    If you require Administrator access, please contact us.
  <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="api-security">
<h2>API Security<a class="headerlink" href="#api-security" title="Permalink to this headline">¶</a></h2>
<p>Don&#8217;t forget to secure your API!  While we provide these convenient
methods in Angular, you need to protect your server APIs as well.
If you are using our Express SDK, you can use the <a class="reference external" href="http://docs.stormpath.com/nodejs/express/latest/authorization.html">Authorization Middleware</a>
to help with this.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="wait_for_user.html" class="btn btn-neutral float-right" title="Waiting For User State">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="password_reset.html" class="btn btn-neutral" title="Password Reset Flow"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Stormpath.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>